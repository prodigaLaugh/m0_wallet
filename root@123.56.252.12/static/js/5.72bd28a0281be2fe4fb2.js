webpackJsonp([5],{"6V2Y":function(s,a){},"8FYg":function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=t("woOf"),i=t.n(e),r=t("Gu7T"),n=t.n(r),o=t("sZUK"),u=t("7+uW"),l=t("zL8q");u.default.use(l.Row),u.default.use(l.Col),u.default.use(l.Input),u.default.use(l.Option),u.default.use(l.Select);var d={created:function(){var s=this;this.isSingleSign=this.judgeIsSingleSign();var a=this.getLocalAccountInfo(),t=a.account_id,e=a.account_type,i=a.account_alias;this.params.account_id=t,this.params.account_type=e;var r={account_id:t,page:1,page_size:9999};o.u.bind(this)(r).then(function(a){var t,e=a.data,i=e.data,r=i.list_asset;i.total_item;"success"==e.status&&(r?(t=s.allAssetsLists).splice.apply(t,[0,999].concat(n()(r))):s.allAssetsLists.splice(0,999))}).catch(function(){});var u={account_alias:i,page:1,page_size:999999};o.m.bind(this)(u).then(function(a){var t,e=a.data.data.list_address;e?(t=s.address).splice.apply(t,[0,99999].concat(n()(e))):s.address.splice(0,99999)})},data:function(){return{isSingleSign:!1,allAssetsLists:[],address:[],amount:"",params:{password:"",amount:"",asset_name:"",asset_id:"",from_address:""},submitFlag:!0}},methods:{adressChangeQueryAmount:function(){var s=this,a=this.allAssetsLists.filter(function(a,t){return a.asset_id==s.params.asset_id});if(a.length){var t=a[0].asset_name||"test";this.params.asset_name=t;var e=i()({},this.params);e.address_id=this.params.from_address,o.E.bind(this)(e).then(function(a){var t=a.data;s.amount=t.data})}},retire:function(){var s=this;if(this.params.from_address){if(!this.params.asset_id)return void this.$message.error("请选择销毁资产类型");if(!this.params.amount)return void this.$message.error("请输入销毁数量");if(this.params.amount>this.amount)return void this.$message.error("销毁数量不能大于当前资产余额");if(!this.params.password)return void this.$message.error("请输入密码")}else this.$message.error("请选择所在地");var a=this.allAssetsLists.filter(function(a,t){return a.asset_id==s.params.asset_id});this.params.asset_name=a[0].asset_name;var t=i()({},this.params);t.amount-=0,this.submitFlag?(this.submitFlag=!1,this.isSingleSign?this.retireSingle(t):this.retireMutil(t)):this.amount},retireSingle:function(s){var a=this;o.I.bind(this)(s).then(function(s){var t=s.data;"success"==t.status?(a.$message({type:"success",message:"提交成功"}),setTimeout(function(){a.$router.go(-1)},1500)):a.$message({type:"error",message:t.error}),a.submitFlag=!0}).catch(function(){a.submitFlag=!0})},retireMutil:function(s){var a=this;o.G.bind(this)(s).then(function(s){var t=s.data;"error"==t.status?a.$message({type:"error",message:t.error}):a.createSignFile(t),a.submitFlag=!0}).catch(function(){a.submitFlag=!0})}}},c={render:function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"outerWrap transferWrap"},[t("div",{staticClass:"commonTitle_one"},[t("span",{on:{click:function(a){return s.$router.go(-1)}}},[s._v("资产操作")]),s._v("/销毁\n\n    ")]),s._v(" "),t("div",{staticClass:"transferInpWrap"},[t("div",{staticClass:"inpItemWrap"},[t("div",[t("span",[s._v("所在地址")]),s._v(" "),t("el-select",{attrs:{placeholder:"请选择"},on:{change:s.adressChangeQueryAmount},model:{value:s.params.from_address,callback:function(a){s.$set(s.params,"from_address",a)},expression:"params.from_address"}},s._l(s.address,function(s){return t("el-option",{key:s.address_id,attrs:{label:s.address_id,value:s.address_id}})}),1)],1)]),s._v(" "),t("div",{staticClass:"inpItemWrap"},[t("div",[t("span",[s._v("销毁资产类型")]),s._v(" "),t("el-select",{attrs:{placeholder:"请选择"},on:{change:s.adressChangeQueryAmount},model:{value:s.params.asset_id,callback:function(a){s.$set(s.params,"asset_id",a)},expression:"params.asset_id"}},s._l(s.allAssetsLists,function(s){return t("el-option",{key:s.value,attrs:{label:s.asset_name,value:s.asset_id}})}),1)],1)]),s._v(" "),s.amount||0===s.amount?t("div",{staticClass:"inpItemWrap"},[t("div",[t("span",[s._v("当前资产余额：")]),s._v(" "),t("span",[s._v(s._s(s.amount))])])]):s._e(),s._v(" "),t("div",{staticClass:"inpItemWrap"},[t("div",[t("span",[s._v("销毁数量")]),s._v(" "),t("el-input",{attrs:{placeholder:"请输入销毁数量"},model:{value:s.params.amount,callback:function(a){s.$set(s.params,"amount",a)},expression:"params.amount"}})],1)]),s._v(" "),t("div",{staticClass:"inpItemWrap"},[t("div",[t("span",[s._v("密码")]),s._v(" "),t("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"new-password",type:"password"},model:{value:s.params.password,callback:function(a){s.$set(s.params,"password",a)},expression:"params.password"}})],1)]),s._v(" "),t("div",{staticClass:"inpItemWrap"},[t("div",[t("span"),s._v(" "),t("span",{staticClass:"submit",on:{click:s.retire}},[s._v(s._s(s.isSingleSign?"提交交易":"生成签名文件"))])])])])])},staticRenderFns:[]};var p=t("VU/8")(d,c,!1,function(s){t("6V2Y")},null,null);a.default=p.exports}});
//# sourceMappingURL=5.72bd28a0281be2fe4fb2.js.map