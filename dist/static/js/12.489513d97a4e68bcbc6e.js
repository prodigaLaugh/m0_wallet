webpackJsonp([12],{h8lZ:function(s,e){},ukcV:function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("woOf"),r=a.n(t),i=a("Gu7T"),n=a.n(i),o=a("sZUK"),d=a("7+uW"),l=a("zL8q");d.default.use(l.Row),d.default.use(l.Col),d.default.use(l.Input),d.default.use(l.Option),d.default.use(l.Select);var c={created:function(){var s=this;this.isSingleSign=this.judgeIsSingleSign();var e=this.getLocalAccountInfo(),a=e.account_id,t=e.account_type,r=e.account_alias;this.params.account_id=a,this.params.account_type=t;var i=this.$route.query,d=i.address_id;if(d){var l=i.asset_id,c=i.asset_name;this.params.from_address=d,this.params.asset_name=c,this.params.asset_id=l,l&&this.adressChangeQueryAmount()}var u={account_id:a,page:1,page_size:9999};o.u.bind(this)(u).then(function(e){var a,t=e.data,r=t.data,i=r.list_asset;r.total_item;"success"==t.status&&(i?(a=s.allAssetsLists).splice.apply(a,[0,999].concat(n()(i))):s.allAssetsLists.splice(0,999))}).catch(function(){});var _={account_alias:r,page:1,page_size:999999};o.m.bind(this)(_).then(function(e){var a,t=e.data.data.list_address;t?(a=s.address).splice.apply(a,[0,99999,{address_id:""}].concat(n()(t))):s.address.splice(0,99999,{address_id:""})})},data:function(){return{isSingleSign:!1,allAssetsLists:[],address:[],to_address:"",amount:"",params:{password:"",amount:"",asset_name:"",asset_id:"",from_address:"",receive_info:[{to_address:"",to_amount:""}]}}},methods:{delPara:function(s){console.log(s,111),s>0&&this.params.receive_info.splice(s,1)},addPara:function(){this.params.receive_info.push({to_address:"",to_amount:""})},adressChangeQueryAmount:function(){var s=this,e=this.allAssetsLists.filter(function(e,a){return e.asset_id==s.params.asset_id});if(e.length||this.params.asset_id){var a=e.length&&e[0].asset_name||"";a&&(this.params.asset_name=a);var t=r()({},this.params);t.address_id=this.params.from_address,o.F.bind(this)(t).then(function(e){var a=e.data;console.log(a,9898),s.amount=a.data})}},transfer:function(){var s=this.params.receive_info.every(function(s){return s.to_address}),e=this.params.receive_info.every(function(s){return 42===s.to_address.length||62===s.to_address.length}),a=this.params.receive_info.every(function(s){return s.to_amount}),t=this.params.receive_info.every(function(s){return"0"===s.to_amount}),i=this.params.receive_info.every(function(s){var e=""+s.to_amount;return e&&e.indexOf(".")>-1});if(this.params.from_address)if(this.params.asset_name)if(s)if(e)if(a)if(t)this.$message.error("转出数量不能为0");else if(i)this.$message.error("转出数量需为整数位数字");else if(this.params.password){var n=r()({},this.params);n.receive_info.map(function(s,e){var a=s.to_amount-0;n.receive_info[e].to_amount=a}),n.amount=n.receive_info.reduce(function(s,e){return s-0+(e.to_amount-0)},0),this.amount<n.amount?this.$message.error("转出数量不能大于当前资产余额"):this.isSingleSign?this.signleSignFn(n):this.mutiSignFn(n)}else this.$message.error("请输入密码");else this.$message.error("请输入转出数量");else this.$message.error("请输入正确格式的目标地址");else this.$message.error("请输入目标地址");else this.$message.error("请选择转出资产");else this.$message.error("请选择转出地址")},signleSignFn:function(s){var e=this;o.P.bind(this)(s).then(function(s){var a=s.data;console.log(a,111),"success"==a.status?(e.$message({type:"success",message:"提交成功"}),setTimeout(function(){e.$router.go(-1)},1500)):e.$message({type:"error",message:a.error})})},mutiSignFn:function(s){var e=this;o.N.bind(this)(s).then(function(s){var a=s.data;console.log(a,222),"error"==a.status?e.$message({type:"error",message:a.error}):e.createSignFile(a)})}}},u={render:function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"outerWrap transferWrap"},[a("div",{staticClass:"commonTitle_one"},[a("span",{on:{click:function(e){return s.$router.go(-1)}}},[s._v("资产操作")]),s._v("/转账\n\n    ")]),s._v(" "),a("div",{staticClass:"transferInpWrap"},[a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[s._v("转出地址")]),s._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:s.adressChangeQueryAmount},model:{value:s.params.from_address,callback:function(e){s.$set(s.params,"from_address",e)},expression:"params.from_address"}},s._l(s.address,function(s){return a("el-option",{key:s.address_id,attrs:{label:s.address_id?s.address_id:"全部",value:s.address_id}})}),1)],1)]),s._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[s._v("转出资产")]),s._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:s.adressChangeQueryAmount},model:{value:s.params.asset_id,callback:function(e){s.$set(s.params,"asset_id",e)},expression:"params.asset_id"}},s._l(s.allAssetsLists,function(s){return a("el-option",{key:s.value,attrs:{label:s.asset_name,value:s.asset_id}})}),1)],1)]),s._v(" "),s.amount||0===s.amount?a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[s._v("当前资产余额")]),s._v(" "),a("span",[s._v(s._s(s.amount))])])]):s._e(),s._v(" "),a("div",{staticClass:"inpTitl"},[s._v("转账详情")]),s._v(" "),a("div",{staticClass:"transferInfoWrap"},[s._l(s.params.receive_info,function(e,t){return a("div",{key:t,staticClass:"inpItemWrap"},[a("div",[a("span",[s._v("目标地址")]),s._v(" "),a("el-input",{attrs:{placeholder:"请输入目标地址"},model:{value:e.to_address,callback:function(a){s.$set(e,"to_address",a)},expression:"item.to_address"}})],1),s._v(" "),a("div",[a("span",[s._v("转出数量")]),s._v(" "),a("el-input",{attrs:{placeholder:"请输入转出数量"},model:{value:e.to_amount,callback:function(a){s.$set(e,"to_amount",a)},expression:"item.to_amount"}})],1),s._v(" "),a("span",{on:{click:function(e){return s.delPara(t)}}},[s._v("删除")])])}),s._v(" "),a("div",{staticClass:"inpItemWrap btnWrap"},[a("div",[a("span"),s._v(" "),a("span",{staticClass:"btn",on:{click:s.addPara}},[s._v("+ 添加转账地址")])])])],2),s._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[s._v("密码")]),s._v(" "),a("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"new-password",type:"password"},model:{value:s.params.password,callback:function(e){s.$set(s.params,"password",e)},expression:"params.password"}})],1)]),s._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span"),s._v(" "),a("span",{staticClass:"submit",on:{click:s.transfer}},[s._v(s._s(s.isSingleSign?"提交交易":"生成签名文件"))])])])])])},staticRenderFns:[]};var _=a("VU/8")(c,u,!1,function(s){a("h8lZ")},null,null);e.default=_.exports}});
//# sourceMappingURL=12.489513d97a4e68bcbc6e.js.map