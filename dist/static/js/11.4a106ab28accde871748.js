webpackJsonp([11],{jLWs:function(t,e){},vvuS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),n=a("Gu7T"),r=a.n(n),l=a("sZUK"),c=a("7+uW"),u=a("zL8q");c.default.use(u.Row),c.default.use(u.Col),c.default.use(u.Input),c.default.use(u.Option),c.default.use(u.Select),c.default.use(u.Dialog);var o={created:function(){var t=this;l.z.bind(this)().then(function(e){var a,s=e.data,i=s.data.list_keys;if((a=t.lists).splice.apply(a,[0,999].concat(r()(i||[]))),t.$route.query.from){var n=JSON.parse(localStorage.privateItem);t.privatekey=n.xpub}else t.privatekey=s[0].xpub})},data:function(){return{createPerson:"",addPrivateKey:"",addPrivatekeyFlag:!1,submitFlag:!0,editIndex:-1,params:{alias:"",quorum:1,xpubs:[]},xpubs:[],privatekey:"",lists:[],signNums:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}},methods:{queryPerson:function(){var t=this,e={xpub:this.addPrivateKey};l.H.bind(this)(e).then(function(e){var a=e.data;"success"==a.status?t.createPerson=a.data.user_name:t.createPerson="",console.log(a)})},selectChange:function(){},openDialog:function(t,e){this.addPrivateKey=t,this.editIndex=e,this.addPrivatekeyFlag=!0},del:function(t){this.xpubs.splice(t,1)},add:function(){var t=this.editIndex>-1?"编辑成功":"添加成功";this.$message({type:"success",message:t}),this.editIndex;var e=this.editIndex>-1?this.editIndex:this.xpubs.length?this.xpubs.length:0,a=this.editIndex>-1?1:0;this.xpubs.splice(e,a,this.addPrivateKey),this.addPrivatekeyFlag=!1,this.addPrivateKey=""},create:function(){var t=this;if(this.xpubs.length<this.params.quorum-1)this.$message({type:"error",message:"秘钥总数不能大于所需签名数"});else{var e=i()({},this.params),a=[this.privatekey].concat(r()(this.xpubs));if(e.xpubs=a,!this.submitFlag)return!1;this.submitFlag=!1,l.c.bind(this)(e).then(function(e){var a=e.data;if("success"==a.status)t.$message({type:"success",message:"创建成功"}),setTimeout(function(){t.$router.go(-1),t.submitFlag=!0},1500);else{var s=a.error;t.$message({type:"error",message:s}),setTimeout(function(){t.submitFlag=!0},200)}console.log(a,111)})}},addAccount:function(){this.addPrivatekeyFlag=!0,this.addPrivateKey="",this.editIndex=-1}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outerWrap createAccountWrap"},[a("div",{staticClass:"commonTitle_one"},[a("span",{on:{click:function(e){return t.$router.push("/main/walletIndex")}}},[t._v("钱包管理")]),t._v("/创建多签钱包\n          ")]),t._v(" "),a("div",{staticClass:"transferInpWrap"},[a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[t._v("钱包名称")]),t._v(" "),a("el-input",{attrs:{placeholder:""},model:{value:t.params.alias,callback:function(e){t.$set(t.params,"alias",e)},expression:"params.alias"}})],1)]),t._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[t._v("钱包秘钥")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择钱包所使用的密钥"},on:{change:t.selectChange},model:{value:t.privatekey,callback:function(e){t.privatekey=e},expression:"privatekey"}},t._l(t.lists,function(t){return a("el-option",{key:t.xpub,attrs:{label:t.alias,value:t.xpub}})}),1)],1)]),t._v(" "),a("div",{staticClass:"inpTitl"},[t._v("可签名秘钥")]),t._v(" "),a("div",{staticClass:"transferInfoWrap"},[t._l(t.xpubs,function(e,s){return a("div",{key:s,staticClass:"signaturedAccountListWrap"},[a("span",[t._v("\n                秘钥：\n              ")]),t._v(" "),a("div",[a("span",[t._v(t._s(e))]),t._v(" "),a("div",[a("span",{staticClass:"green",staticStyle:{"margin-right":"20px"},on:{click:function(a){return t.openDialog(e,s)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"red",on:{click:function(e){return t.del(s)}}},[t._v("删除")])])])])}),t._v(" "),a("div",{staticClass:"inpItemWrap btnWrap",staticStyle:{"margin-top":"30px"}},[a("div",[a("span",{staticStyle:{width:"86px"}}),t._v(" "),a("span",{staticClass:"btn",on:{click:t.addAccount}},[t._v("+ 添加可签名账户")])])])],2),t._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[t._v("所需签名数")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.quorum,callback:function(e){t.$set(t.params,"quorum",e)},expression:"params.quorum"}},t._l(t.signNums,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)]),t._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span"),t._v(" "),a("span",{staticClass:"submit",on:{click:t.create}},[t._v("创建账户")])])])]),t._v(" "),a("el-dialog",{attrs:{title:"请输入账户密码",center:!0,visible:t.addPrivatekeyFlag,width:"40%"},on:{"update:visible":function(e){t.addPrivatekeyFlag=e}}},[a("div",{staticClass:"1"},[a("div",{staticStyle:{padding:"20px 0 10px","text-align":"left"}},[t._v("⚠️请在下方通过输入公钥添加可签名的钱包，钱包所有者可在密钥管理中查看自己密钥的公钥。")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入可签名公钥"},on:{change:t.queryPerson,input:t.queryPerson},model:{value:t.addPrivateKey,callback:function(e){t.addPrivateKey=e},expression:"addPrivateKey"}}),t._v(" "),a("div",{staticStyle:{"text-align":"left","padding-top":"10px"}},[t._v("秘钥创建人："+t._s(t.createPerson))])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addPrivatekeyFlag=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(o,d,!1,function(t){a("jLWs")},"data-v-aba53118",null);e.default=p.exports}});
//# sourceMappingURL=11.4a106ab28accde871748.js.map