webpackJsonp([17],{qtqG:function(t,s){},ukcV:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("sZUK"),r=a("7+uW"),i=a("zL8q");r.default.use(i.Row),r.default.use(i.Col),r.default.use(i.Input),r.default.use(i.Option),r.default.use(i.Select);var n={created(){this.isSingleSign=this.judgeIsSingleSign();var t=this.getLocalAccountInfo(),s=t.account_id,a=t.account_type,r=t.account_alias;this.params.account_id=s,this.params.account_type=a;var i=this.$route.query,n=i.address_id;if(n){var l=i.asset_id,o=i.asset_name;this.params.from_address=n,this.params.asset_name=o,this.params.asset_id=l}let d={account_id:s};e.r.bind(this)(d).then(({data:t})=>{this.allAssetsLists=[...t.data],console.log(t,111)}).catch(()=>{});var c={account_alias:r};e.m.bind(this)(c).then(({data:t})=>{this.address=t.data})},data:()=>({isSingleSign:!1,allAssetsLists:[],address:[],to_address:"",amount:"",params:{password:"",amount:"",asset_name:"",asset_id:"",from_address:"",receive_info:[{to_address:"",to_amount:""}]}}),methods:{delPara(t){console.log(t,111),t>0&&this.params.receive_info.splice(t,1)},addPara(){this.params.receive_info.push({to_address:"",to_amount:""})},adressChangeQueryAmount(){var t=this.allAssetsLists.filter((t,s)=>t.asset_id==this.params.asset_id);if(t.length){var s=t[0].asset_name||"test";this.params.asset_name=s;var a=Object.assign({},this.params);a.address_id=this.params.from_address,e.B.bind(this)(a).then(({data:t})=>{console.log(t,9898),this.amount=t.data})}},transfer(){let t=Object.assign({},this.params);this.to_address,this.to_amount;t.receive_info.map((s,a)=>{var e=s.to_amount-0;t.receive_info[a].to_amount=e}),t.amount=t.receive_info.reduce((t,s)=>t-0+(s.to_amount-0),0),this.isSingleSign?this.signleSignFn(t):this.mutiSignFn(t)},signleSignFn(t){e.L.bind(this)(t).then(({data:t})=>{console.log(t,111),"success"==t.status?(this.$message({type:"success",message:"提交成功"}),setTimeout(()=>{this.$router.go(-1)},1500)):this.$message({type:"warning",message:t.detail})})},mutiSignFn(t){e.J.bind(this)(t).then(({data:t})=>{if(console.log(t,222),"error"==t.status)this.$message({type:"warning",message:t.detail});else{var s=new Blob([JSON.stringify(t)]),a=document.createElement("a");a.download="data.hex",a.href=window.URL.createObjectURL(s),a.click()}})}}},l={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"outerWrap transferWrap"},[a("el-row",[a("el-col",{attrs:{lg:20,md:22}},[a("div",{staticClass:"commonTitle_one"},[t._v("\n\t\t\t\t资产操作\n\t\t\t\t"),a("span",[a("i",{staticClass:"el-icon-arrow-right"}),t._v(" "),a("span",[t._v("转账")])]),t._v(" "),a("div",[t._v("返回")])])])],1),t._v(" "),a("div",{staticClass:"commonTitle_two"},[t._v("转账")]),t._v(" "),a("div",{staticClass:"transferInpWrap"},[a("el-row",[a("el-col",{attrs:{lg:20,md:22}},[a("el-row",{staticClass:"transferInpListsWrap"},[a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"transferInpListLeft"},[t._v("转出地址")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.adressChangeQueryAmount},model:{value:t.params.from_address,callback:function(s){t.$set(t.params,"from_address",s)},expression:"params.from_address"}},t._l(t.address,function(t){return a("el-option",{key:t.address_id,attrs:{label:t.address_id,value:t.address_id}})}),1)],1),t._v(" "),a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"transferInpListLeft"},[t._v("转出资产")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.adressChangeQueryAmount},model:{value:t.params.asset_id,callback:function(s){t.$set(t.params,"asset_id",s)},expression:"params.asset_id"}},t._l(t.allAssetsLists,function(t){return a("el-option",{key:t.value,attrs:{label:t.asset_name,value:t.asset_id}})}),1)],1),t._v(" "),t.amount?a("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{md:24}},[t._v("当前资产余额："+t._s(t.amount))]):t._e(),t._v(" "),a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"transferInpListLeft"},[t._v("转账详情")])]),t._v(" "),a("div",{staticClass:"paraWrap",staticStyle:{clear:"both","margin-bottom":"40px"}},[a("el-row",{staticClass:"top"},[a("el-col",{attrs:{lg:11}},[t._v("\n\t\t\t\t\t\t\t\t目标地址\n\t\t\t\t\t\t\t")]),t._v(" "),a("el-col",{attrs:{lg:11}},[t._v("\n\t\t\t\t\t\t\t\t转出数量\n\t\t\t\t\t\t\t")])],1),t._v(" "),t._l(t.params.receive_info,function(s,e){return a("el-row",{key:e,staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{lg:10}},[a("el-input",{attrs:{placeholder:"请输入目标地址"},model:{value:s.to_address,callback:function(a){t.$set(s,"to_address",a)},expression:"item.to_address"}})],1),t._v(" "),a("el-col",{attrs:{lg:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{lg:10}},[a("el-input",{attrs:{placeholder:"请输入要转出的资产数量"},model:{value:s.to_amount,callback:function(a){t.$set(s,"to_amount",a)},expression:"item.to_amount"}})],1),t._v(" "),a("el-col",{attrs:{lg:1}},[t._v(" ")]),t._v(" "),a("el-col",{staticClass:"btn",attrs:{lg:2}},[a("span",{on:{click:function(s){return t.delPara(e)}}},[t._v("删除")])]),t._v(" "),a("el-col",{staticStyle:{"padding-top":"10px"},attrs:{md:24}},[t._v("\n\t\t\t\t\t\t\t\t所属账户：\n\t\t\t\t\t\t\t")])],1)}),t._v(" "),a("el-row",{staticClass:"addBtn"},[a("el-col",[a("span",{staticClass:"addBtnWrap",on:{click:t.addPara}},[t._v("+添加转账地址")])])],1)],2),t._v(" "),a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"transferInpListLeft"},[t._v("请输入密码")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入密码",autocomplete:"new-password",type:"password"},model:{value:t.params.password,callback:function(s){t.$set(t.params,"password",s)},expression:"params.password"}})],1),t._v(" "),a("el-col",{attrs:{lg:24}},[a("div",{staticClass:"transferAccoutItemBtn",on:{click:t.transfer}},[t._v(t._s(t.isSingleSign?"提交交易":"生成签名文件"))])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(t){a("qtqG")},null,null);s.default=o.exports}});
//# sourceMappingURL=17.60e606ae9f10f390a9dd.js.map