webpackJsonp([4],{fCkl:function(a,t){},z45v:function(a,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=i("sZUK"),s=i("7+uW"),l=i("zL8q");s.default.use(l.Row),s.default.use(l.Col),s.default.use(l.Dialog);var n={created:function(){var a=this,t=this.$route.query.id;e.v.bind(this)(t).then(function(t){var i=t.data;console.log(i,111);i=i.data;a.detail=i,a.params.file_hash=i.tx_id})},data:function(){return{downloadUrl:"",detail:{},uploadfileDialFlag:!1,params:{myfile:"",file_hash:""},fileName:"",uploadfileCompleteFlag:!1,uploadSuccess:!1}},methods:{download:function(a,t){var i=new FormData;i.append("uuid",a),i.append("file_name",t),e.h.bind(this)(i).then(function(a){var i=a.data;console.log(i,4444);var e=i,s=new FileReader;s.readAsDataURL(e),s.onload=function(a){var i=document.createElement("a");i.download=t,i.href=a.target.result,document.body.appendChild(i),i.click(),document.body.removeChild(i)}})},fileSelect:function(a){var t=a.target,i=t.files[0];this.fileName=t.value,this.params.myfile=i},verifyFile:function(){var a=this,t=new FormData;t.append("myfile",this.params.myfile),t.append("tx_id",this.params.file_hash),this.uploadfileDialFlag=!1,e.i.bind(this)(t).then(function(t){var i=t.data;a.uploadfileCompleteFlag=!0,"success"===i.status?a.uploadSuccess=!0:a.uploadSuccess=!1})}}},o={render:function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"outerWrap depositDetailWrap"},[i("div",{staticClass:"commonTitle_one"},[i("span",{on:{click:function(t){return a.$router.go(-1)}}},[a._v("可信存证")]),a._v("/存证详情\n     \n    ")]),a._v(" "),i("div",{staticClass:"detailInfoListsWrap itemWrap"},[i("div",{staticClass:"tit"},[a._v("存证概况")]),a._v(" "),i("div",{staticClass:"infoW"},[i("div",{staticClass:"list"},[i("span",[a._v("存证名称")]),a._v(" "),i("span",[a._v(a._s(a.detail.evidence_name))])]),a._v(" "),i("div",{staticClass:"list"},[i("span",[a._v("上链交易hash")]),a._v(" "),i("span",[a._v(a._s(a.detail.tx_id))])]),a._v(" "),i("div",{staticClass:"list"},[i("span",[a._v("备注信息")]),a._v(" "),i("span",[a._v(a._s(a.detail.describe))])])])]),a._v(" "),i("div",{staticClass:"detailInfoListsWrap itemWrap"},[i("div",{staticClass:"tit"},[a._v("存证文件")]),a._v(" "),i("div",{staticClass:"infoW"},[i("div",{staticClass:"list"},[i("span",[a._v("文件名")]),a._v(" "),i("span",[a._v(a._s(a.detail.file_name||"--"))])]),a._v(" "),i("div",{staticClass:"list"},[i("span",[a._v("文件大小")]),a._v(" "),i("span",[a._v(a._s(a.detail.file_size||"--"))])]),a._v(" "),i("div",{staticClass:"list"},[i("span",[a._v("备注信息")]),a._v(" "),i("span",[a._v(a._s(a.detail.describe))])]),a._v(" "),a.detail.file_name?i("div",{staticClass:"btn"},[i("span",[a._v("操作")]),a._v(" "),i("div",[i("span",{staticClass:"blue",on:{click:function(t){return a.download(a.detail.uuid,a.detail.file_name)}}},[a._v("下载链上文件")]),a._v(" "),i("span",{staticClass:"blue",on:{click:function(t){a.uploadfileDialFlag=!0}}},[a._v("校验我的文件")])])]):a._e(),a._v(" "),i("div",{staticClass:"depositData"},[i("span",[a._v("存证数据")]),a._v(" "),i("span",[a._v(a._s(a.detail.evidence_data))])])])]),a._v(" "),i("el-dialog",{attrs:{title:"文件校验",visible:a.uploadfileDialFlag,width:"600px","custom-class":"uploadFileWrap",center:!0},on:{"update:visible":function(t){a.uploadfileDialFlag=t}}},[i("div",{staticClass:"fileWrap"},[i("div",{staticClass:"tips"},[a._v("⚠️系统将用上传的文件与链上存证文件进行比对校验，验证两个文件是否完全一致")]),a._v(" "),i("div",{staticClass:"inputWrap"},[i("input",{attrs:{type:"file"},on:{change:a.fileSelect}}),a._v(" "),i("span",[a._v("+选择文件上传校验")])]),a._v(" "),a.fileName?i("div",{staticClass:"filename"},[a._v(a._s(a.fileName))]):a._e()]),a._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:a.verifyFile}},[a._v("上传文件")])],1)]),a._v(" "),i("el-dialog",{attrs:{title:"文件校验",visible:a.uploadfileCompleteFlag,width:"600px","custom-class":"uploadFileCompleteWrap",center:!0},on:{"update:visible":function(t){a.uploadfileCompleteFlag=t}}},[i("div",[a.uploadSuccess?i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"green"},[i("span",{staticClass:"el-icon-success"})]),a._v(" "),i("div",[a._v("校验通过"),i("br"),a._v("上传的文件与链上存证文件完全一致")])]):i("div",{staticClass:"contentWrap"},[i("div",{staticClass:"red"},[i("span",{staticClass:"el-icon-warning"})]),a._v(" "),i("div",[a._v("校验未通过"),i("br"),a._v("上传文件与链上存证不文件一致")])])]),a._v(" "),a.uploadSuccess?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.uploadfileCompleteFlag=!1}}},[a._v("返回")])],1):i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.uploadfileCompleteFlag=!1}}},[a._v("返回")]),a._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){a.uploadfileCompleteFlag=!1,a.uploadfileDialFlag=!0,a.fileName=""}}},[a._v("重新上传")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(n,o,!1,function(a){i("fCkl")},null,null);t.default=d.exports}});
//# sourceMappingURL=4.29e2e1405c2e23e1f350.js.map