webpackJsonp([12],{I0RV:function(e,t){},vvuS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),i=a.n(s),n=a("Gu7T"),r=a.n(n),l=a("sZUK"),c=a("7+uW"),u=a("zL8q");c.default.use(u.Row),c.default.use(u.Col),c.default.use(u.Input),c.default.use(u.Option),c.default.use(u.Select),c.default.use(u.Dialog);var o={created:function(){var e=this;l.y.bind(this)().then(function(t){var a,s=t.data,i=s.data.list_keys;if((a=e.lists).splice.apply(a,[0,999].concat(r()(i||[]))),e.$route.query.from){var n=JSON.parse(localStorage.privateItem);e.privatekey=n.xpub}else e.privatekey=s[0].xpub})},data:function(){return{createPerson:"",addPrivateKey:"",addPrivatekeyFlag:!1,submitFlag:!0,editIndex:-1,params:{alias:"",quorum:2,xpubs:[]},xpubs:[],privatekey:"",lists:[],signNums:[2,3,4,5,6,7,8,9,10,11,12,13,14,15]}},methods:{queryPerson:function(){var e=this,t={xpub:this.addPrivateKey};l.F.bind(this)(t).then(function(t){var a=t.data;"success"==a.status?e.createPerson=a.data.user_name:e.createPerson="",console.log(a)})},selectChange:function(){},openDialog:function(e,t){this.addPrivateKey=e,this.editIndex=t,this.addPrivatekeyFlag=!0},del:function(e){this.xpubs.splice(e,1)},add:function(){var e=this.editIndex>-1?"编辑成功":"添加成功";this.$message({type:"success",message:e}),this.editIndex;var t=this.editIndex>-1?this.editIndex:this.xpubs.length?this.xpubs.length:0,a=this.editIndex>-1?1:0;this.xpubs.splice(t,a,this.addPrivateKey),this.addPrivatekeyFlag=!1,this.addPrivateKey=""},create:function(){var e=this;if(this.params.alias)if(this.privatekey)if(this.xpubs.length)if(this.xpubs.length<this.params.quorum-1)this.$message({type:"error",message:"秘钥总数不能大于所需签名数"});else{var t=i()({},this.params),a=[this.privatekey].concat(r()(this.xpubs));if(t.xpubs=a,!this.submitFlag)return!1;this.submitFlag=!1,l.c.bind(this)(t).then(function(t){var a=t.data;if("success"==a.status)e.$message({type:"success",message:"创建成功"}),setTimeout(function(){e.$router.go(-1),e.submitFlag=!0},1500);else{var s=a.error;e.$message({type:"error",message:s}),setTimeout(function(){e.submitFlag=!0},200)}console.log(a,111)})}else this.$message({type:"error",message:"请添加可签名秘钥"});else this.$message({type:"error",message:"请选择钱包秘钥"});else this.$message({type:"error",message:"请输入钱包名称"})},addAccount:function(){this.addPrivatekeyFlag=!0,this.addPrivateKey="",this.editIndex=-1}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outerWrap createAccountWrap"},[a("div",{staticClass:"commonTitle_one"},[a("span",{on:{click:function(t){return e.$router.push("/main/walletIndex")}}},[e._v("钱包管理")]),e._v("/创建多签钱包\n        ")]),e._v(" "),a("div",{staticClass:"transferInpWrap"},[a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[e._v("钱包名称")]),e._v(" "),a("el-input",{attrs:{placeholder:""},model:{value:e.params.alias,callback:function(t){e.$set(e.params,"alias",t)},expression:"params.alias"}})],1)]),e._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[e._v("钱包秘钥")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择钱包所使用的密钥"},on:{change:e.selectChange},model:{value:e.privatekey,callback:function(t){e.privatekey=t},expression:"privatekey"}},e._l(e.lists,function(e){return a("el-option",{key:e.xpub,attrs:{label:e.alias,value:e.xpub}})}),1)],1)]),e._v(" "),a("div",{staticClass:"inpTitl"},[e._v("可签名秘钥")]),e._v(" "),a("div",{staticClass:"transferInfoWrap"},[e._l(e.xpubs,function(t,s){return a("div",{key:s,staticClass:"signaturedAccountListWrap"},[a("span",[e._v("\n                秘钥：\n              ")]),e._v(" "),a("div",[a("span",[e._v(e._s(t))]),e._v(" "),a("div",[a("span",{staticClass:"green",staticStyle:{"margin-right":"20px"},on:{click:function(a){return e.openDialog(t,s)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"red",on:{click:function(t){return e.del(s)}}},[e._v("删除")])])])])}),e._v(" "),a("div",{staticClass:"inpItemWrap btnWrap",staticStyle:{"margin-top":"30px"}},[a("div",[a("span",{staticStyle:{width:"86px"}}),e._v(" "),a("span",{staticClass:"btn",on:{click:e.addAccount}},[e._v("+ 添加可签名账户")])])])],2),e._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span",[e._v("所需签名数")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.quorum,callback:function(t){e.$set(e.params,"quorum",t)},expression:"params.quorum"}},e._l(e.signNums,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)]),e._v(" "),a("div",{staticClass:"inpItemWrap"},[a("div",[a("span"),e._v(" "),a("span",{staticClass:"submit",on:{click:e.create}},[e._v("创建钱包")])])])]),e._v(" "),a("el-dialog",{attrs:{title:"请输入账户密码",center:!0,visible:e.addPrivatekeyFlag,width:"40%"},on:{"update:visible":function(t){e.addPrivatekeyFlag=t}}},[a("div",{staticClass:"1"},[a("div",{staticStyle:{padding:"20px 0 10px","text-align":"left"}},[e._v("⚠️请在下方通过输入公钥添加可签名的钱包，钱包所有者可在密钥管理中查看自己密钥的公钥。")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入可签名公钥"},on:{change:e.queryPerson,input:e.queryPerson},model:{value:e.addPrivateKey,callback:function(t){e.addPrivateKey=t},expression:"addPrivateKey"}}),e._v(" "),a("div",{staticStyle:{"text-align":"left","padding-top":"10px"}},[e._v("秘钥创建人："+e._s(e.createPerson))])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addPrivatekeyFlag=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(o,d,!1,function(e){a("I0RV")},"data-v-3cce718b",null);t.default=p.exports}});
//# sourceMappingURL=12.bd27cdef7035c4de27dd.js.map