webpackJsonp([24],{hdey:function(t,e){},vvuS:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("sZUK"),i=s("7+uW"),l=s("zL8q");i.default.use(l.Row),i.default.use(l.Col),i.default.use(l.Input),i.default.use(l.Option),i.default.use(l.Select),i.default.use(l.Dialog);var n={created(){a.u.bind(this)().then(({data:t})=>{t=t.data;this.lists=t,this.privatekey=t[0].xpub})},data:()=>({createPerson:"",addPrivateKey:"",addPrivatekeyFlag:!1,submitFlag:!0,editIndex:-1,params:{alias:"",quorum:1,xpubs:[]},xpubs:[],privatekey:"",lists:[],signNums:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}),methods:{queryPerson(){let t={xpub:this.addPrivateKey};a.C.bind(this)(t).then(({data:t})=>{"success"==t.status?this.createPerson=t.data.user_name:this.createPerson="",console.log(t)})},selectChange(){},openDialog(t,e){this.addPrivateKey=t,this.editIndex=e,this.addPrivatekeyFlag=!0},del(t){this.xpubs.splice(t,1)},add(){var t=this.editIndex>-1?"编辑成功":"添加成功";this.$message({type:"success",message:t}),this.editIndex;var e=this.editIndex>-1?this.editIndex:this.xpubs.length?this.xpubs.length:0,s=this.editIndex>-1?1:0;this.xpubs.splice(e,s,this.addPrivateKey),this.addPrivatekeyFlag=!1,this.addPrivateKey=""},create(){if(this.xpubs.length<this.params.quorum-1)return void this.$message({type:"warning",message:"秘钥总数不能大于所需签名数"});let t=Object.assign({},this.params),e=[this.privatekey,...this.xpubs];if(t.xpubs=e,!this.submitFlag)return!1;this.submitFlag=!1,a.c.bind(this)(t).then(({data:t})=>{if("success"==t.status)this.$message({type:"success",message:"创建成功"}),setTimeout(()=>{this.$router.go(-1),this.submitFlag=!0},1500);else{var e=t.detail;this.$message({type:"warning",message:e}),setTimeout(()=>{this.submitFlag=!0},200)}console.log(t,111)})},addAccount(){this.addPrivatekeyFlag=!0,this.addPrivateKey="",this.editIndex=-1}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"outerWrap createAccountWrap"},[s("el-row",[s("el-col",{attrs:{lg:20,md:22}},[s("div",{staticClass:"commonTitle_one"},[t._v("\n\t\t\t\t钱包管理\n\t\t\t\t"),s("span",[s("i",{staticClass:"el-icon-arrow-right"}),t._v(" "),s("span",[t._v("创建多签钱包")])])]),t._v(" "),s("div",{staticClass:"commonTitle_two"},[t._v("\n\t\t\t\t创建多签钱包\n\t\t\t\t"),s("span",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])]),t._v(" "),s("div",{staticClass:"transferInpWrap"},[s("el-row",[s("el-col",[s("el-row",{staticClass:"transferInpListsWrap"},[s("el-col",{attrs:{md:24}},[s("div",{staticClass:"transferInpListLeft"},[t._v("钱包名称")]),t._v(" "),s("el-input",{attrs:{placeholder:""},model:{value:t.params.alias,callback:function(e){t.$set(t.params,"alias",e)},expression:"params.alias"}})],1),t._v(" "),s("el-col",{attrs:{md:24}},[s("div",{staticClass:"transferInpListLeft"},[t._v("钱包秘钥")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择钱包所使用的密钥"},on:{change:t.selectChange},model:{value:t.privatekey,callback:function(e){t.privatekey=e},expression:"privatekey"}},t._l(t.lists,function(t){return s("el-option",{key:t.xpub,attrs:{label:t.alias,value:t.xpub}})}),1)],1),t._v(" "),s("el-col",{attrs:{md:24}},[s("div",{staticClass:"transferInpListLeft"},[t._v("可签名秘钥")]),t._v(" "),s("div",{staticClass:"signaturedAccountWrap"},[s("div",{staticClass:"signaturedAccountListsWrap"},t._l(t.xpubs,function(e,a){return s("div",{key:a,staticClass:"signaturedAccountListWrap"},[s("div",[t._v(t._s(e))]),t._v(" "),s("div",[s("span",{on:{click:function(s){return t.openDialog(e,a)}}},[t._v("编辑")]),t._v(" "),s("span",{on:{click:function(e){return t.del(a)}}},[t._v("删除")])])])}),0),t._v(" "),s("div",{staticClass:"signaturedAccountAdd",on:{click:t.addAccount}},[t._v("+添加可签名账户")])])]),t._v(" "),s("el-col",{attrs:{md:24}},[s("div",{staticClass:"transferInpListLeft"},[t._v("所需签名数")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.params.quorum,callback:function(e){t.$set(t.params,"quorum",e)},expression:"params.quorum"}},t._l(t.signNums,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),t._v(" "),s("el-col",{attrs:{lg:24}},[s("div",{staticClass:"createAccountBtn",on:{click:t.create}},[t._v("创建账户")])])],1)],1)],1)],1)])],1),t._v(" "),s("el-dialog",{attrs:{title:"请输入账户密码",center:!0,visible:t.addPrivatekeyFlag,width:"40%"},on:{"update:visible":function(e){t.addPrivatekeyFlag=e}}},[s("div",{staticClass:"1"},[s("div",{staticStyle:{padding:"20px 0 10px","text-align":"left"}},[t._v("⚠️请在下方通过输入公钥添加可签名的钱包，钱包所有者可在密钥管理中查看自己密钥的公钥。")]),t._v(" "),s("el-input",{attrs:{placeholder:"请输入可签名公钥"},on:{change:t.queryPerson},model:{value:t.addPrivateKey,callback:function(e){t.addPrivateKey=e},expression:"addPrivateKey"}}),t._v(" "),s("div",{staticStyle:{"text-align":"left","padding-top":"10px"}},[t._v("秘钥创建人："+t._s(t.createPerson))])],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.addPrivatekeyFlag=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=s("VU/8")(n,r,!1,function(t){s("hdey")},"data-v-26cb4dc4",null);e.default=d.exports}});
//# sourceMappingURL=24.8c27675b001fa6ae5344.js.map